<!DOCTYPE html>
<html lang="vi">
<head>
    <title>Đăng Ký Gửi Xe</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .form-floating > label { padding-left: 20px; }
        .form-control { border-radius: 12px; height: 55px; }
        .btn-reg { border-radius: 12px; padding: 12px; font-weight: bold; font-size: 1.1rem; }
    </style>
</head>
<body class="bg-light p-3">
    <div class="card mx-auto shadow-sm border-0 rounded-4" style="max-width: 500px; margin-top: 20px;">
        <div class="card-body p-4">
            <h3 class="text-center text-primary fw-bold mb-4">ĐĂNG KÝ</h3>
            
            <form action="/register" method="POST" onsubmit="return validateForm()">
                <div class="form-floating mb-3">
                    <input type="text" name="cccd" class="form-control" placeholder="CCCD" 
                           inputmode="numeric" pattern="[0-9]*" maxlength="12" required>
                    <label>Số CCCD (12 số)</label>
                </div>

                <div class="row g-2 mb-3">
                    <div class="col-6">
                        <div class="form-floating">
                            <input type="password" id="pin" name="pin" class="form-control" placeholder="PIN" 
                                   maxlength="6" inputmode="numeric" pattern="[0-9]*" required>
                            <label>Mã PIN (6 số)</label>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-floating">
                            <input type="password" id="confirm_pin" class="form-control" placeholder="Nhập lại" 
                                   maxlength="6" inputmode="numeric" pattern="[0-9]*" required>
                            <label>Nhập lại PIN</label>
                        </div>
                    </div>
                </div>
                <div id="pinError" class="text-danger small mb-3 text-center fw-bold" style="display:none;">
                    Mã PIN không khớp! Vui lòng nhập lại.
                </div>

                <div class="form-floating mb-3">
                    <input type="text" name="full_name" class="form-control" placeholder="Họ tên" required>
                    <label>Họ và Tên</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="text" name="address" class="form-control" placeholder="Địa chỉ" required>
                    <label>Địa chỉ căn hộ</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="text" name="license_plate" class="form-control" placeholder="Biển số" required>
                    <label>Biển số xe (VD: 29A1-12345)</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="text" name="vehicle_type" class="form-control" placeholder="Loại xe" required>
                    <label>Loại xe (VD: Honda Airblade)</label>
                </div>

                <div class="form-floating mb-4">
                    <select name="status" class="form-select">
                        <option value="0">Xe Đang Gửi</option>
                        <option value="1">Xe Đang Không Gửi</option>
                    </select>
                    <label>Trạng thái hiện tại của xe</label>
                </div>

                <button type="submit" class="btn btn-primary w-100 btn-reg shadow">ĐĂNG KÝ</button>
            </form>
        </div>
        <div class="text-center pb-4 mt-2">
            <a href="/login" class="text-decoration-none">Đã có tài khoản? <strong>Đăng nhập</strong></a>
        </div>
    </div>

    <script>
        function validateForm() {
            const pin = document.getElementById('pin').value;
            const confirm = document.getElementById('confirm_pin').value;
            const err = document.getElementById('pinError');

            if (pin !== confirm) {
                err.style.display = 'block';
                // Rung báo lỗi nếu trên mobile
                if(navigator.vibrate) navigator.vibrate([50, 50, 50]);
                return false;
            }
            
            if (pin.length < 6) {
                alert("Mã PIN phải đủ 6 số!");
                return false;
            }

            err.style.display = 'none';
            return true;
        }
    </script>
</body>
</html>